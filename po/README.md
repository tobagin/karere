# Karere Translation Guide

This directory contains translation files for the Karere application.

## Overview

Karere uses GNU Gettext for internationalization (i18n). All user-visible strings in the application are marked with translation functions and can be translated into multiple languages.

## Supported Languages

The application currently supports the following languages (listed in `LINGUAS`):

### Tier 1 (Major Languages)
- Spanish (es)
- French (fr)
- German (de)
- Portuguese (Brazil) (pt_BR)
- Italian (it)
- Dutch (nl)
- Russian (ru)
- Japanese (ja)
- Chinese Simplified (zh_CN)
- Arabic (ar)

### Tier 2 (Additional Coverage)
- Hindi (hi)
- Korean (ko)
- Turkish (tr)
- Polish (pl)
- Czech (cs)
- Swedish (sv)
- Norwegian Bokm√•l (nb)
- Finnish (fi)
- Greek (el)
- Hebrew (he)

## Files Structure

- `LINGUAS` - Lists all supported language codes
- `POTFILES.in` - Lists all source files containing translatable strings
- `meson.build` - Meson build configuration for translations
- `<lang>.po` - Translation files for each language
- `karere.pot` - Template file (generated by build system)

## For Translators

### Getting Started

1. Choose a language from the `LINGUAS` file that needs translation
2. Open the corresponding `.po` file (e.g., `fr.po` for French)
3. If the file is mostly empty, you'll need to generate the template first:
   ```bash
   # From the project root directory
   meson setup build
   ninja -C build karere-pot
   ```
4. Use a translation tool like:
   - Poedit (GUI editor)
   - Lokalize (KDE)
   - Gtranslator (GNOME)
   - Or edit directly with a text editor

### Translation Guidelines

1. **Context Comments**: Pay attention to `# TRANSLATORS:` comments that provide context
2. **Placeholders**: Preserve `%s`, `%d` and similar placeholders in their correct positions
3. **Keyboard Shortcuts**: Underscored letters (`_Preferences`) indicate keyboard shortcuts
4. **Consistency**: Use consistent terminology throughout the application
5. **Right-to-Left Languages**: Arabic and Hebrew require special attention to text direction

### Key Translation Areas

- **UI Elements**: Menu items, buttons, labels from Blueprint files
- **Notifications**: Background and message notifications
- **Error Messages**: User-facing error messages and toasts
- **Preferences**: All settings and configuration options
- **Desktop Integration**: Application name, description in desktop entries

### Testing Translations

To test your translations:

1. Build the application with your translations:
   ```bash
   meson setup build
   ninja -C build
   ```

2. Set your locale and run the application:
   ```bash
   LANG=fr_FR.UTF-8 ./build/karere  # For French
   LANG=es_ES.UTF-8 ./build/karere  # For Spanish
   ```

### Submitting Translations

1. Fork the repository on GitHub
2. Update the appropriate `.po` file with your translations
3. Test your translations locally
4. Submit a pull request with your changes

## For Developers

### Adding New Translatable Strings

1. Mark strings in Vala code with `_()` function:
   ```vala
   // Simple translation
   show_error_toast(_("File not found"));
   
   // With translator comment
   // TRANSLATORS: Error message when file is too large
   show_error_toast(_("File is too large"));
   
   // With placeholders
   // TRANSLATORS: %s is the filename
   show_info_toast(_("File %s copied successfully").printf(filename));
   ```

2. Mark strings in Blueprint files with `_()`:
   ```blueprint
   title: _("Preferences");
   subtitle: _("Configure application settings");
   ```

3. Update `POTFILES.in` if you add new source files

4. Regenerate the POT file:
   ```bash
   ninja -C build karere-pot
   ```

### Translation Function Reference

- `_()` - Standard translation function
- `N_()` - Mark for translation but don't translate immediately
- `ngettext()` - Handle plural forms
- `C_()` - Translation with context (when same English text needs different translations)

### Best Practices

1. Always add translator comments for ambiguous strings
2. Avoid concatenating translatable strings
3. Use placeholders instead of string concatenation
4. Consider plural forms for count-dependent messages
5. Test with longer translations (German, Finnish) to ensure UI doesn't break

## Technical Details

- **Text Domain**: `karere`
- **Encoding**: UTF-8
- **Build System**: Meson with Gettext integration
- **Locale Directory**: Configured via `LOCALEDIR` in build system

## Contributing

Translation contributions are welcome! Please see the main project README for general contribution guidelines, and follow the translation-specific guidelines above.

For questions about translations, please open an issue on the GitHub repository.