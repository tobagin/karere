using Gtk 4.0;
using Adw 1;

template $KarerePreferences : Adw.PreferencesDialog {
  title: _("Preferences");

  // General Settings Page
  Adw.PreferencesPage general_page {
    title: _("General");
    icon-name: "applications-system-symbolic";

    Adw.PreferencesGroup {
      title: _("Appearance");

      Adw.ComboRow theme_row {
        title: _("Theme");
        subtitle: _("Choose the application theme");
        model: StringList {
          strings [
            _("System Preference"),
            _("Light"),
            _("Dark")
          ]
        };
      }
    }

    Adw.PreferencesGroup {
      title: _("Spell Checking");

      Adw.SwitchRow spell_enabled_row {
        title: _("Enable Spell Checking");
        subtitle: _("Check spelling while typing messages");
      }

      Adw.SwitchRow spell_auto_detect_row {
        title: _("Auto-detect Language");
        subtitle: _("Automatically detect system language for spell checking");
      }
    }

    Adw.PreferencesGroup spell_languages_group {
      title: _("Languages");

      Adw.ExpanderRow spell_languages_expander {
        title: _("Spell Check Languages");
        subtitle: _("Configure enabled languages for spell checking");

        Adw.ActionRow current_languages_row {
          title: _("Current Languages");
          subtitle: _("Languages currently enabled for spell checking");

          [suffix]
          Gtk.Label current_languages_label {
            label: _("Auto-detected");
            valign: center;
            css-classes: ["dim-label"];
          }
        }

        Adw.ActionRow add_language_row {
          title: _("Add Language");
          subtitle: _("Add a new language for spell checking");
          activatable: true;

          [suffix]
          Gtk.Button add_language_button {
            label: _("Add");
            valign: center;
          }
        }
      }
    }

    Adw.PreferencesGroup {
      title: _("Developer Tools");

      Adw.SwitchRow developer_tools_row {
        title: _("Enable Developer Tools");
        subtitle: _("Enable access to web developer tools for debugging");
      }

      Adw.ActionRow open_dev_tools_row {
        title: _("Open Developer Tools");
        subtitle: _("Open the web inspector to debug WhatsApp Web");
        activatable: true;
        
        [suffix]
        Gtk.Button dev_tools_button {
          label: _("Open");
          valign: center;
        }
      }
    }
  }

  // Accessibility Settings Page
  Adw.PreferencesPage accessibility_page {
    title: _("Accessibility");
    icon-name: "preferences-desktop-accessibility-symbolic";

    Adw.PreferencesGroup {
      title: _("Keyboard Navigation");

      Adw.SwitchRow keyboard_shortcuts_row {
        title: _("Enable Keyboard Shortcuts");
        subtitle: _("Enable application-wide keyboard shortcuts");
      }

      Adw.SwitchRow focus_indicators_row {
        title: _("Focus Indicators");
        subtitle: _("Show visual focus indicators for keyboard navigation");
      }

      Adw.ActionRow shortcuts_help_row {
        title: _("View Keyboard Shortcuts");
        subtitle: _("Display all available keyboard shortcuts");
        activatable: true;

        [suffix]
        Gtk.Button shortcuts_help_button {
          label: _("View");
          valign: center;
        }
      }
    }

    Adw.PreferencesGroup {
      title: _("Visual Accessibility");

      Adw.SwitchRow high_contrast_row {
        title: _("High Contrast Mode");
        subtitle: _("Use high contrast colors for better visibility");
      }

      Adw.SwitchRow reduced_motion_row {
        title: _("Reduce Motion");
        subtitle: _("Reduce animations and transitions");
      }
    }

    Adw.PreferencesGroup webview_zoom_group {
      title: _("WebView Zoom");

      Adw.SwitchRow webview_zoom_enabled_row {
        title: _("Enable WebView Zoom");
        subtitle: _("Enable zoom functionality for WhatsApp Web content");
      }

      Adw.SpinRow webkit_zoom_level_row {
        title: _("Zoom Level");
        subtitle: _("Current zoom level for WhatsApp Web content");
        adjustment: Adjustment {
          lower: 0.5;
          upper: 3.0;
          step-increment: 0.1;
          page-increment: 0.2;
          value: 1.0;
        };
        digits: 1;
        visible: false;
      }

      Adw.SpinRow webkit_zoom_step_row {
        title: _("Zoom Step Size");
        subtitle: _("Amount to change zoom level with each zoom action");
        adjustment: Adjustment {
          lower: 0.1;
          upper: 0.5;
          step-increment: 0.05;
          page-increment: 0.1;
          value: 0.1;
        };
        digits: 2;
        visible: false;
      }

      Adw.SwitchRow webview_zoom_controls_row {
        title: _("Show Zoom Controls");
        subtitle: _("Display zoom buttons in the application header bar");
        visible: false;
      }
    }

    Adw.PreferencesGroup {
      title: _("Screen Reader Support");

      Adw.SwitchRow screen_reader_row {
        title: _("Screen Reader Optimizations");
        subtitle: _("Optimize interface for screen reader usage");
      }

      Adw.ActionRow screen_reader_status_row {
        title: _("Screen Reader Status");
        subtitle: _("Current accessibility technology detected");

        [suffix]
        Gtk.Label screen_reader_status_label {
          label: _("Not detected");
          valign: center;
          css-classes: ["dim-label"];
        }
      }
    }

    Adw.PreferencesGroup {
      title: _("Accessibility Shortcuts");

      Adw.SwitchRow accessibility_shortcuts_row {
        title: _("Accessibility Shortcuts");
        subtitle: _("Enable zoom and contrast keyboard shortcuts");
      }

      Adw.SwitchRow developer_shortcuts_row {
        title: _("Developer Shortcuts");
        subtitle: _("Enable developer tool keyboard shortcuts");
      }

      Adw.SwitchRow notification_shortcuts_row {
        title: _("Notification Shortcuts");
        subtitle: _("Enable notification management shortcuts");
      }
    }

  }

  // Notifications Settings Page
  Adw.PreferencesPage notifications_page {
    title: _("Notifications");
    icon-name: "@APP_ID@-notification-symbolic";

    Adw.PreferencesGroup {
      title: _("Notifications");

      Adw.SwitchRow system_notifications_row {
        title: _("System Notifications");
        subtitle: _("Enable all notifications from this application");
      }

      Adw.SwitchRow notifications_enabled_row {
        title: _("Message Notifications");
        subtitle: _("Show notifications for new WhatsApp messages");
      }

      Adw.ComboRow background_notifications_row {
        title: _("Background Notifications");
        subtitle: _("Show notifications when app is running in background");
        model: StringList {
          strings [
            _("Always"),
            _("First time only"),
            _("Never")
          ]
        };
      }

      Adw.SwitchRow notification_sound_row {
        title: _("Notification Sounds");
        subtitle: _("Play sounds for notifications");
      }
    }

    Adw.PreferencesGroup {
      title: _("Message Preview");

      Adw.SwitchRow notification_preview_row {
        title: _("Show Message Preview");
        subtitle: _("Display message content in notifications");
      }

      Adw.SpinRow notification_preview_length_row {
        title: _("Preview Length");
        subtitle: _("Maximum number of characters to show in preview");
        adjustment: Adjustment {
          lower: 10;
          upper: 200;
          step-increment: 5;
          page-increment: 10;
          value: 50;
        };
      }
    }

    Adw.PreferencesGroup {
      title: _("Background");

      Adw.SpinRow background_frequency_row {
        title: _("Check Frequency");
        subtitle: _("Minutes between background notification checks");
        adjustment: Adjustment {
          lower: 1;
          upper: 60;
          step-increment: 1;
          page-increment: 5;
          value: 5;
        };
      }
    }
  }

  // Do Not Disturb Settings Page
  Adw.PreferencesPage dnd_page {
    title: _("Do Not Disturb");
    icon-name: "@APP_ID@-do-not-disturb-symbolic";

    Adw.PreferencesGroup {
      title: _("Do Not Disturb");

      Adw.SwitchRow dnd_enabled_row {
        title: _("Enable Do Not Disturb");
        subtitle: _("Temporarily disable all notifications");
      }
    }

    Adw.PreferencesGroup {
      title: _("Scheduled Do Not Disturb");

      Adw.SwitchRow dnd_scheduled_row {
        title: _("Scheduled Do Not Disturb");
        subtitle: _("Automatically enable Do Not Disturb at specific times");
      }

      Adw.ActionRow dnd_start_time_row {
        title: _("Start Time");
        subtitle: _("Time when Do Not Disturb begins");
        visible: false;

        [suffix]
        Gtk.Entry dnd_start_time_entry {
          placeholder-text: _("22:00");
          max-width-chars: 5;
          input-purpose: digits;
          valign: center;
        }
      }

      Adw.ActionRow dnd_end_time_row {
        title: _("End Time");
        subtitle: _("Time when Do Not Disturb ends");
        visible: false;

        [suffix]
        Gtk.Entry dnd_end_time_entry {
          placeholder-text: _("08:00");
          max-width-chars: 5;
          input-purpose: digits;
          valign: center;
        }
      }
    }

    Adw.PreferencesGroup dnd_notifications_group {
      title: _("DND Notifications");
      visible: false;

      Adw.SwitchRow dnd_background_row {
        title: _("Background Notifications");
        subtitle: _("Allow background notifications during Do Not Disturb");
      }

      Adw.ActionRow dnd_contact_messages_row {
        title: _("Contact Messages");
        subtitle: _("Allow direct messages from contacts");
        visible: false;

        [suffix]
        Gtk.CheckButton dnd_contact_messages_check {
          valign: center;
        }
      }

      Adw.ActionRow dnd_group_messages_row {
        title: _("Group Messages");
        subtitle: _("Allow messages from group chats");
        visible: false;

        [suffix]
        Gtk.CheckButton dnd_group_messages_check {
          valign: center;
        }
      }

      Adw.ActionRow dnd_mentions_row {
        title: _("Mentions");
        subtitle: _("Allow notifications when you are mentioned");
        visible: false;

        [suffix]
        Gtk.CheckButton dnd_mentions_check {
          valign: center;
        }
      }

      Adw.ActionRow dnd_voice_calls_row {
        title: _("Voice Calls");
        subtitle: _("Allow incoming voice call notifications");
        visible: false;

        [suffix]
        Gtk.CheckButton dnd_voice_calls_check {
          valign: center;
        }
      }

      Adw.ActionRow dnd_video_calls_row {
        title: _("Video Calls");
        subtitle: _("Allow incoming video call notifications");
        visible: false;

        [suffix]
        Gtk.CheckButton dnd_video_calls_check {
          valign: center;
        }
      }

      Adw.ActionRow dnd_media_messages_row {
        title: _("Media Messages");
        subtitle: _("Allow notifications for photos, videos, and files");
        visible: false;

        [suffix]
        Gtk.CheckButton dnd_media_messages_check {
          valign: center;
        }
      }

      Adw.ActionRow dnd_status_updates_row {
        title: _("Status Updates");
        subtitle: _("Allow notifications for status updates from contacts");
        visible: false;

        [suffix]
        Gtk.CheckButton dnd_status_updates_check {
          valign: center;
        }
      }
    }
  }
}