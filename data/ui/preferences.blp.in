using Gtk 4.0;
using Adw 1;

template $KarerePreferencesDialog : Adw.PreferencesDialog {
  title: _("Preferences");

  // General Settings Page
  Adw.PreferencesPage general_page {
    title: _("General");
    icon-name: "applications-system-symbolic";

    Adw.PreferencesGroup {
      title: _("Appearance");

      Adw.ComboRow theme_row {
        title: _("Theme");
        subtitle: _("Choose the application theme");
        model: StringList {
          strings [
            _("System Preference"),
            _("Light"),
            _("Dark")
          ]
        };
      }
    }

    Adw.PreferencesGroup {
      title: _("Spell Checking");
      description: _("Check spelling while typing in WhatsApp Web");

      Adw.ActionRow dictionary_status_row {
        title: _("Available Dictionaries");
        subtitle: _("Spell checking dictionaries found on your system");

        [suffix]
        Gtk.Label dictionary_count_label {
          label: "0 dictionaries";
          valign: center;
          css-classes: ["dim-label"];
        }

        [suffix]
        Gtk.Image dictionary_status_icon {
          icon-name: "emblem-default-symbolic";
          valign: center;
          css-classes: ["success"];
          visible: false;
        }
      }

      Adw.SwitchRow spell_enabled_row {
        title: _("Enable Spell Checking");
        subtitle: _("Check spelling while typing messages");
      }

      Adw.SwitchRow spell_auto_detect_row {
        title: _("Auto-detect Language");
        subtitle: _("Automatically detect system language for spell checking");
      }
    }

    Adw.PreferencesGroup spell_languages_group {
      title: _("Spell Check Languages");
      description: _("Select which languages to check for spelling errors");

      Adw.ActionRow current_languages_row {
        title: _("Active Languages");

        [suffix]
        Gtk.Label current_languages_label {
          label: _("Auto-detected");
          valign: center;
          css-classes: ["dim-label"];
          wrap: true;
          max-width-chars: 30;
        }
      }

      Adw.ComboRow language_selection_row {
        title: _("Add Language");
        subtitle: _("Select from available dictionaries");
        visible: false;
      }

      Adw.ActionRow no_dictionaries_row {
        title: _("No Dictionaries Available");
        subtitle: _("Install hunspell dictionaries to enable spell checking");
        visible: false;

        [suffix]
        Gtk.Image warning_icon {
          icon-name: "dialog-warning-symbolic";
          valign: center;
          css-classes: ["warning"];
        }
      }
    }

    Adw.PreferencesGroup {
      title: _("Downloads");

      Adw.ActionRow download_directory_row {
        title: _("Download Directory");
        subtitle: _("Default (Downloads)");

        [suffix]
        Gtk.Button choose_directory_button {
          label: _("Choose Folder");
          valign: center;
        }

        [suffix]
        Gtk.Button reset_directory_button {
          label: _("Reset");
          valign: center;
        }
      }
    }

    Adw.PreferencesGroup {
      title: _("Developer Tools");

      Adw.SwitchRow developer_tools_row {
        title: _("Enable Developer Tools");
        subtitle: _("Enable access to web developer tools for debugging");
      }

      Adw.ActionRow open_dev_tools_row {
        title: _("Open Developer Tools");
        subtitle: _("Open the web inspector to debug WhatsApp Web");
        activatable: true;
        
        [suffix]
        Gtk.Button dev_tools_button {
          label: _("Open");
          valign: center;
        }
      }
    }
  }

  // Accessibility Settings Page
  Adw.PreferencesPage accessibility_page {
    title: _("Accessibility");
    icon-name: "preferences-desktop-accessibility-symbolic";

    Adw.PreferencesGroup {
      title: _("Keyboard Navigation");

      Adw.SwitchRow keyboard_shortcuts_row {
        title: _("Enable Keyboard Shortcuts");
        subtitle: _("Enable application-wide keyboard shortcuts");
      }

      Adw.SwitchRow focus_indicators_row {
        title: _("Focus Indicators");
        subtitle: _("Show visual focus indicators for keyboard navigation");
      }

      Adw.ActionRow shortcuts_help_row {
        title: _("View Keyboard Shortcuts");
        subtitle: _("Display all available keyboard shortcuts");
        activatable: true;

        [suffix]
        Gtk.Button shortcuts_help_button {
          label: _("View");
          valign: center;
        }
      }
    }

    Adw.PreferencesGroup {
      title: _("Visual Accessibility");

      Adw.SwitchRow high_contrast_row {
        title: _("High Contrast Mode");
        subtitle: _("Use high contrast colors for better visibility");
      }

      Adw.SwitchRow reduced_motion_row {
        title: _("Reduce Motion");
        subtitle: _("Reduce animations and transitions");
      }
    }

    Adw.PreferencesGroup webview_zoom_group {
      title: _("WebView Zoom");

      Adw.SwitchRow webview_zoom_enabled_row {
        title: _("Enable WebView Zoom");
        subtitle: _("Enable zoom functionality for WhatsApp Web content");
      }

      Adw.SpinRow webkit_zoom_level_row {
        title: _("Zoom Level");
        subtitle: _("Current zoom level for WhatsApp Web content");
        adjustment: Adjustment {
          lower: 0.5;
          upper: 3.0;
          step-increment: 0.1;
          page-increment: 0.2;
          value: 1.0;
        };
        digits: 1;
        visible: false;
      }

      Adw.SpinRow webkit_zoom_step_row {
        title: _("Zoom Step Size");
        subtitle: _("Amount to change zoom level with each zoom action");
        adjustment: Adjustment {
          lower: 0.1;
          upper: 0.5;
          step-increment: 0.05;
          page-increment: 0.1;
          value: 0.1;
        };
        digits: 2;
        visible: false;
      }

      Adw.SwitchRow webview_zoom_controls_row {
        title: _("Show Zoom Controls");
        subtitle: _("Display zoom buttons in the application header bar");
        visible: false;
      }
    }

    Adw.PreferencesGroup {
      title: _("Screen Reader Support");

      Adw.SwitchRow screen_reader_row {
        title: _("Screen Reader Optimizations");
        subtitle: _("Optimize interface for screen reader usage");
      }

      Adw.ActionRow screen_reader_status_row {
        title: _("Screen Reader Status");
        subtitle: _("Current accessibility technology detected");

        [suffix]
        Gtk.Label screen_reader_status_label {
          label: _("Not detected");
          valign: center;
          css-classes: ["dim-label"];
        }
      }
    }

    Adw.PreferencesGroup {
      title: _("Accessibility Shortcuts");

      Adw.SwitchRow accessibility_shortcuts_row {
        title: _("Accessibility Shortcuts");
        subtitle: _("Enable zoom and contrast keyboard shortcuts");
      }

      Adw.SwitchRow developer_shortcuts_row {
        title: _("Developer Shortcuts");
        subtitle: _("Enable developer tool keyboard shortcuts");
      }

      Adw.SwitchRow notification_shortcuts_row {
        title: _("Notification Shortcuts");
        subtitle: _("Enable notification management shortcuts");
      }
    }

  }

  // Notifications Settings Page
  Adw.PreferencesPage notifications_page {
    title: _("Notifications");
    icon-name: "@APP_ID@-notification-symbolic";

    Adw.PreferencesGroup {
      title: _("Notifications");

      Adw.SwitchRow system_notifications_row {
        title: _("System Notifications");
        subtitle: _("Enable all notifications from this application");
      }

      Adw.SwitchRow notifications_enabled_row {
        title: _("Message Notifications");
        subtitle: _("Show notifications for new WhatsApp messages");
      }

      Adw.ComboRow background_notifications_row {
        title: _("Background Notifications");
        subtitle: _("Show notifications when app is running in background");
        model: StringList {
          strings [
            _("Always"),
            _("First time only"),
            _("Never")
          ]
        };
      }

      Adw.SwitchRow notification_sound_row {
        title: _("Notification Sounds");
        subtitle: _("Play sounds for notifications");
      }

      Adw.SwitchRow download_notifications_row {
        title: _("Download Notifications");
        subtitle: _("Show notifications when downloads complete");
      }
    }

    Adw.PreferencesGroup {
      title: _("Message Preview");

      Adw.SwitchRow notification_preview_row {
        title: _("Show Message Preview");
        subtitle: _("Display message content in notifications");
      }

      Adw.SpinRow notification_preview_length_row {
        title: _("Preview Length");
        subtitle: _("Maximum number of characters to show in preview");
        adjustment: Adjustment {
          lower: 10;
          upper: 200;
          step-increment: 5;
          page-increment: 10;
          value: 50;
        };
      }
    }

    Adw.PreferencesGroup {
      title: _("Background");

      Adw.SpinRow background_frequency_row {
        title: _("Check Frequency");
        subtitle: _("Minutes between background notification checks");
        adjustment: Adjustment {
          lower: 1;
          upper: 60;
          step-increment: 1;
          page-increment: 5;
          value: 5;
        };
      }
    }
  }
}