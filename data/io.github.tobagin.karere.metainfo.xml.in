<?xml version="1.0" encoding="UTF-8"?>
<component type="desktop-application">
  <id>@APP_ID@</id>
  
  <!-- Flatpak ID transition support -->
  <provides>
    <id>com.mudeprolinux.whakarere</id>
  </provides>
  <replaces>
    <id>com.mudeprolinux.whakarere</id>
  </replaces>
  
  <metadata_license>CC0-1.0</metadata_license>
  <project_license>GPL-3.0-or-later</project_license>
  <name>@APP_NAME@</name>
  <summary>GTK4 WhatsApp Client</summary>
  
  <branding>
    <color type="primary" scheme_preference="light">#25D366</color>
    <color type="primary" scheme_preference="dark">#128C7E</color>
  </branding>
  
  <description>
    <p>
      Karere is a production-ready GTK4 WhatsApp client that provides a native desktop experience
      for WhatsApp Web. Built with Vala, GTK4, and Libadwaita, it offers a clean and
      intuitive interface that integrates seamlessly with your Linux desktop.
    </p>
    <p>
      Features:
    </p>
    <ul>
      <li>Native GTK4 interface with Libadwaita styling</li>
      <li>Blueprint UI with declarative interface design</li>
      <li>Persistent login data and cookie management</li>
      <li>Settings dialog with theme selection and privacy controls</li>
      <li>Full WhatsApp Web functionality with desktop integration</li>
      <li>Hardware-accelerated WebKit rendering</li>
      <li>Comprehensive crash reporting with privacy controls</li>
      <li>Graceful shutdown with window state persistence</li>
      <li>Production hardening with security enhancements</li>
      <li>Professional logging system with rotation</li>
      <li>Signal handling for proper system integration</li>
    </ul>
  </description>
  
  <screenshots>
    <screenshot type="default">
      <image>https://github.com/tobagin/karere/blob/main/main-window.png?raw=true</image>
      <caption>Main application window with WhatsApp Web integration</caption>
    </screenshot>
    <screenshot>
      <image>https://github.com/tobagin/karere/blob/main/about.png?raw=true</image>
      <caption>About dialog showing application information</caption>
    </screenshot>
    <screenshot>
      <image>https://github.com/tobagin/karere/blob/main/preferences.png?raw=true</image>
      <caption>Application preferences and settings dialog</caption>
    </screenshot>
    <screenshot>
      <image>https://github.com/tobagin/karere/blob/main/shortcuts.png?raw=true</image>
      <caption>Keyboard shortcuts and productivity features</caption>
    </screenshot>
  </screenshots>
  
  <url type="homepage">https://github.com/tobagin/karere</url>
  <url type="bugtracker">https://github.com/tobagin/karere/issues</url>
  <url type="help">https://github.com/tobagin/karere/discussions</url>
  <url type="donation">https://github.com/sponsors/tobagin</url>
  <url type="contact">https://github.com/tobagin</url>
  <url type="contribute">https://github.com/tobagin/karere</url>

  <developer id="io.github.tobagin">
    <name>Thiago Fernandes</name>
  </developer>
  
  <requires>
    <display_length compare="ge">768</display_length>
  </requires>
  
  <recommends>
    <control>keyboard</control>
    <control>pointing</control>
    <control>touch</control>
  </recommends>
  
  <categories>
    <category>Network</category>
    <category>InstantMessaging</category>
    <category>Chat</category>
  </categories>
  
  <keywords>
    <keyword>whatsapp</keyword>
    <keyword>chat</keyword>
    <keyword>messaging</keyword>
    <keyword>web</keyword>
    <keyword>communication</keyword>
  </keywords>
  
  <launchable type="desktop-id">@APP_ID@.desktop</launchable>
  
  <releases>
    <release version="0.9.3" date="2025-09-15">
      <description>
        <p>‚ú® Enhanced Emoji Support, External Link Handling, and Build Improvements</p>
        <p>New Features:</p>
        <ul>
          <li>Added high-quality Noto Color Emoji fonts (v2.047, Unicode 16.0 support)</li>
          <li>Enhanced WebKit rendering with maximum hardware acceleration</li>
          <li>Improved emoji consistency with bundled font system</li>
          <li>Optimized font loading to eliminate display conflicts</li>
          <li>Added WebKit cache control setting for improved rendering consistency</li>
          <li>Cache disabled by default to prevent emoji rendering issues</li>
        </ul>
        <p>Bug Fixes:</p>
        <ul>
          <li>Fixed external links not opening in default browser when running in Flatpak</li>
          <li>Improved external link handling with proper Flatpak portal support</li>
          <li>Fixed random emoji display issues and blank emoji problems</li>
          <li>Fixed invalid meson version requirement preventing builds</li>
          <li>Corrected dependency version specifications in meson.build</li>
          <li>Resolved flatpak-builder compatibility issues</li>
          <li>Enhanced URL validation for external link detection</li>
        </ul>
        <p>Improvements:</p>
        <ul>
          <li>Eliminated WebKit cache corruption affecting emoji rendering</li>
          <li>Streamlined font stack for consistent emoji appearance</li>
          <li>Enhanced 2D canvas acceleration for better graphics performance</li>
          <li>Improved font loading stability and reduced race conditions</li>
          <li>Better sandboxed environment compatibility</li>
          <li>More reliable link opening mechanism</li>
          <li>Enhanced logging for external link operations</li>
          <li>Better build system compatibility with different environments</li>
          <li>Enhanced CI/CD pipeline stability</li>
          <li>More robust dependency handling</li>
        </ul>
        <p>Technical Changes:</p>
        <ul>
          <li>Removed unnecessary mobile user agent switching (WhatsApp Web is desktop-only)</li>
          <li>Disabled problematic WebKit caches causing font corruption</li>
          <li>Simplified emoji font configuration to single high-quality source</li>
          <li>Restored Safari Linux user agent for native WebKit experience</li>
          <li>Added subpixel font scaling and advanced rendering optimizations</li>
          <li>Implemented Flatpak portal system for external link handling</li>
        </ul>
      </description>
    </release>
    <release version="0.8.5" date="2025-08-25">
      <description>
        <p>üîß Code Refactoring and Architecture Improvements</p>
        <p>Improvements:</p>
        <ul>
          <li>Converted template files to preprocessor directives for cleaner code</li>
          <li>Eliminated .vala.in template substitution system</li>
          <li>Added compile-time conditional compilation using DEVELOPMENT flag</li>
          <li>Improved build system maintainability and type safety</li>
          <li>Added contributors Aman Das and Cameo to about dialog</li>
        </ul>
        <p>Technical Changes:</p>
        <ul>
          <li>Replaced window.vala.in and preferences.vala.in with direct .vala files</li>
          <li>Updated meson.build to use Vala preprocessor directives</li>
          <li>Simplified source file management in build system</li>
        </ul>
      </description>
    </release>
    <release version="0.8.4" date="2025-08-25">
      <description>
        <p>üêõ Bug Fixes and Improvements</p>
        <p>Bug Fixes:</p>
        <ul>
          <li>Fixed crash when handling invalid user input data</li>
          <li>Resolved memory leak in notification cleanup</li>
          <li>Corrected accessibility focus handling</li>
        </ul>
        <p>Improvements:</p>
        <ul>
          <li>Better error handling for network timeouts</li>
          <li>Enhanced stability for extended usage</li>
          <li>Performance optimizations for scrolling</li>
        </ul>
      </description>
    </release>
    <release version="0.8.3" date="2025-08-25">
      <description>
        <p>üîß Metadata and Standards Compliance</p>
        <p>Bug Fixes:</p>
        <ul>
          <li>Fixed duplicate provides tags in metainfo validation</li>
          <li>Corrected AppStream metainfo format compliance</li>
          <li>Resolved invalid markup in release descriptions</li>
        </ul>
        <p>Improvements:</p>
        <ul>
          <li>Updated all references from appdata to metainfo format</li>
          <li>Enhanced Flathub compliance and validation</li>
          <li>Improved translation file consistency</li>
        </ul>
      </description>
    </release>
    <release version="0.8.2" date="2025-08-25">
      <description>
        <p>üêõ Bug Fixes and Improvements</p>
        <p>Bug Fixes:</p>
        <ul>
          <li>Fixed crash when handling invalid notification data</li>
          <li>Resolved memory leak in WebKit manager cleanup</li>
          <li>Corrected window state persistence on shutdown</li>
        </ul>
        <p>Improvements:</p>
        <ul>
          <li>Better error handling for network disconnections</li>
          <li>Enhanced stability during long sessions</li>
          <li>Performance optimizations for faster startup</li>
        </ul>
      </description>
    </release>
    <release version="0.8.0" date="2025-08-24">
      <description>
        <p>üöÄ Major Architecture Migration: Python to Vala/GTK4</p>
        <p>BREAKING CHANGE: Complete rewrite from Python to native Vala for better performance and integration.</p>
        <p>‚ö†Ô∏è Important: After upgrading, you will need to re-sync your mobile device with WhatsApp Web as this is a completely new application implementation.</p>
        <p>New Features:</p>
        <ul>
          <li>Native Vala/GTK4 implementation for optimal performance</li>
          <li>Modern LibAdwaita UI with Blueprint declarative interface</li>
          <li>Enhanced WebKitGTK 6.0 integration</li>
          <li>Advanced notification system with native desktop integration</li>
          <li>Comprehensive accessibility support</li>
          <li>Professional logging and crash reporting system</li>
          <li>Keyboard shortcuts and productivity features</li>
          <li>Multi-language spell checking support</li>
          <li>Granular privacy and notification controls</li>
          <li>Hardware-accelerated rendering</li>
          <li>Improved memory efficiency and startup performance</li>
        </ul>
        <p>Technical Improvements:</p>
        <ul>
          <li>Migrated from Python 3 to native Vala compilation</li>
          <li>Modern Meson build system with Blueprint UI compilation</li>
          <li>Comprehensive test suite with unit and integration tests</li>
          <li>Production-ready error handling and crash recovery</li>
          <li>Enhanced security with proper sandboxing</li>
          <li>Complete internationalization support</li>
        </ul>
      </description>
    </release>
  </releases>
  
  <content_rating type="oars-1.1">
    <content_attribute id="social-chat">moderate</content_attribute>
    <content_attribute id="social-info">mild</content_attribute>
  </content_rating>
</component>