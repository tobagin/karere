<?xml version="1.0" encoding="UTF-8"?>
<component type="desktop-application">
  <id>io.github.tobagin.karere</id>
  
  <!-- Flatpak ID transition support -->
  <provides>
    <id>com.mudeprolinux.whakarere</id>
  </provides>
  <replaces>
    <id>com.mudeprolinux.whakarere</id>
  </replaces>
  
  <metadata_license>CC0-1.0</metadata_license>
  <project_license>GPL-3.0-or-later</project_license>
  
  <name>Karere</name>
  <summary>GTK4 WhatsApp Client</summary>
  
  <description>
    <p>
      Karere is a production-ready GTK4 WhatsApp client that provides a native desktop experience
      for WhatsApp Web. Built with Python, GTK4, and Libadwaita, it offers a clean and
      intuitive interface that integrates seamlessly with your Linux desktop.
    </p>
    <p>
      Features:
    </p>
    <ul>
      <li>Native GTK4 interface with Libadwaita styling</li>
      <li>Blueprint UI with declarative interface design</li>
      <li>Persistent login data and cookie management</li>
      <li>Settings dialog with theme selection and privacy controls</li>
      <li>Full WhatsApp Web functionality with desktop integration</li>
      <li>Hardware-accelerated WebKit rendering</li>
      <li>Comprehensive crash reporting with privacy controls</li>
      <li>Graceful shutdown with window state persistence</li>
      <li>Production hardening with security enhancements</li>
      <li>Professional logging system with rotation</li>
      <li>Signal handling for proper system integration</li>
    </ul>
  </description>

  <developer_name>Thiago Fernandes</developer_name>
  <url type="homepage">https://github.com/tobagin/karere</url>
  <url type="bugtracker">https://github.com/tobagin/karere/issues</url>
  <url type="help">https://github.com/tobagin/karere/</url>
  
  <launchable type="desktop-id">io.github.tobagin.karere.desktop</launchable>
  
  <screenshots>
    <screenshot type="default">
      <image>https://github.com/tobagin/karere/blob/main/screenshots/main-window.png?raw=true</image>
    </screenshot>
    <screenshot>
      <image>https://github.com/tobagin/karere/blob/main/screenshots/about-dialog.png?raw=true</image>
    </screenshot>
    <screenshot>
      <image>https://github.com/tobagin/karere/blob/main/screenshots/settings-dialog.png?raw=true</image>
    </screenshot>
  </screenshots>
  
  <content_rating type="oars-1.1">
    <content_attribute id="social-chat">moderate</content_attribute>
    <content_attribute id="social-info">mild</content_attribute>
  </content_rating>
  
  <releases>
    <release version="@VERSION@" date="2025-01-20">
      <description>
        <p>Advanced notification system and window management enhancements</p>
        <ul>
          <li>Window position saving and restoration (X11/Wayland compatible)</li>
          <li>Improved window state management with size, position, and maximized state</li>
          <li>Advanced notification system foundation with 12 new configuration options</li>
          <li>Core notification settings for messages, background, system events, and Do Not Disturb</li>
          <li>Comprehensive notification management schema (Phase 1 of 8-phase enhancement plan)</li>
          <li>GSettings schema expanded with notification control options</li>
          <li>Foundation for professional-grade notification management system</li>
          <li>Complete notification settings UI with organized preference groups and controls</li>
          <li>Advanced Do Not Disturb configuration with scheduling and status display</li>
          <li>Message notification controls with preview settings and focus management</li>
          <li>Background notification frequency control (always/first-time/never)</li>
          <li>Real-time settings validation and dynamic status updates</li>
          <li>Intelligent conditional visibility with progressive disclosure for all settings</li>
          <li>Professional UX with contextual option groups that appear/disappear based on parent toggles</li>
          <li>Enhanced DND scheduling interface with clean separate time entry controls</li>
          <li>Menu consistency improvements (Settings → Preferences) for better user experience</li>
          <li>Smart dependency handling for complex multi-level notification configurations</li>
          <li>Core NotificationManager class with comprehensive filtering and DND support</li>
          <li>Advanced Do Not Disturb with manual toggle and scheduled time-based activation</li>
          <li>Smart message processing with preview length control and privacy awareness</li>
          <li>Session-aware background notifications with frequency management</li>
          <li>Real-time settings integration with dynamic notification behavior updates</li>
          <li>Robust error handling and graceful fallback for notification system reliability</li>
          <li>Seamless integration with existing WhatsApp Web notification detection system</li>
          <li>Enhanced JavaScript notification handlers with rich contextual data passing</li>
          <li>Intelligent window focus awareness for distraction-free notification filtering</li>
          <li>Unified notification pipeline supporting both system and message notifications</li>
          <li>Complete Phase 1.4 integration enabling sophisticated context-aware notification decisions</li>
        </ul>
      </description>
    </release>
    <release version="0.3.0" date="2025-07-18">
      <description>
        <p>Major production release with comprehensive hardening and new features</p>
        <ul>
          <li>Comprehensive crash reporting system with privacy controls and local storage</li>
          <li>Graceful shutdown procedures with window state persistence and resource cleanup</li>
          <li>Production hardening with automatic environment detection and security enhancements</li>
          <li>Professional logging system with rotating files and configurable levels</li>
          <li>Centralized version management with automated validation</li>
          <li>Signal handling for proper system integration (SIGINT, SIGTERM, SIGHUP)</li>
          <li>Enhanced error handling and recovery mechanisms throughout the application</li>
          <li>WebView resource management with proper cleanup on shutdown</li>
          <li>Crash reporting settings dialog with statistics and management options</li>
          <li>Temporary files cleanup and comprehensive resource management</li>
          <li>Force quit capability for emergency shutdown situations</li>
          <li>Fixed GLib-GIO-CRITICAL error in application startup</li>
          <li>Complete removal of debug code and development artifacts</li>
          <li>Comprehensive test suites for all major components</li>
          <li>Production-ready user experience with state persistence</li>
        </ul>
      </description>
    </release>
    <release version="0.1.9" date="2025-07-18">
      <description>
        <p>Enhanced external link handling and improved browser integration</p>
        <ul>
          <li>Fixed external link handling to properly open links in system default browser</li>
          <li>Implemented proper Flatpak portal support for secure external link opening</li>
          <li>Added comprehensive navigation policy handling for both internal and external links</li>
          <li>Improved WebView initialization with proper user agent configuration</li>
          <li>Enhanced platform detection - now correctly shows as Linux instead of macOS</li>
          <li>Added support for both NAVIGATION_ACTION and NEW_WINDOW_ACTION link types</li>
          <li>Implemented dual user agent override (HTTP headers + JavaScript) for better compatibility</li>
          <li>Fixed conversation window loading issues in WhatsApp Web</li>
          <li>Added comprehensive debugging output for navigation decisions</li>
          <li>Enhanced security by using portal-based external application launching</li>
          <li>Improved domain detection logic to properly distinguish internal vs external links</li>
          <li>Added separate dev/prod app ID support for concurrent development and production usage</li>
        </ul>
      </description>
    </release>
    <release version="0.1.8" date="2025-07-15">
      <description>
        <p>Updated application icon with new Maori-inspired design</p>
        <ul>
          <li>Replaced application icon with beautiful new Maori-inspired design reflecting the app name "Karere"</li>
          <li>Generated all required icon sizes (16x16 to 512x512) following Flathub quality guidelines</li>
          <li>Icon features traditional Maori patterns with excellent contrast and scalability</li>
          <li>Improved visual identity and brand consistency across all platforms</li>
          <li>Enhanced desktop integration with culturally appropriate iconography</li>
        </ul>
      </description>
    </release>
    <release version="0.1.7" date="2025-07-14">
      <description>
        <p>Updated metadata URLs to reflect GitHub repository</p>
        <ul>
          <li>Updated homepage URL to point to GitHub repository</li>
          <li>Consolidated all project URLs to github.com/tobagin/karere</li>
          <li>Improved metadata consistency across all project files</li>
        </ul>
      </description>
    </release>
    <release version="0.1.6" date="2025-01-13">
      <description>
        <p>Flatpak ID transition metadata and compatibility improvements</p>
        <ul>
          <li>Added Flatpak ID transition support from com.mudeprolinux.whakarere to io.github.tobagin.karere</li>
          <li>Added provides and replaces tags for seamless user migration</li>
          <li>Improved compatibility for users upgrading from the old Whakarere ID</li>
          <li>Prepared metadata for Flathub resubmission under new ID</li>
          <li>Enhanced metainfo structure for better app store compatibility</li>
        </ul>
      </description>
    </release>
    <release version="0.1.5" date="2025-01-13">
      <description>
        <p>Major rebranding: Application renamed from Whakarere to Karere with new app ID</p>
        <ul>
          <li>Changed application name from "Whakarere" to "Karere" (Māori for messenger)</li>
          <li>Updated app ID from com.mudeprolinux.whakarere to io.github.tobagin.karere</li>
          <li>Replaced all application icons with new Karere branding</li>
          <li>Updated Python package structure from whakarere to karere</li>
          <li>Fixed UI template names and resource references for proper functionality</li>
          <li>Updated all configuration files, manifests, and build scripts</li>
          <li>Maintained full backward compatibility of features and settings</li>
          <li>Updated documentation and project metadata</li>
        </ul>
      </description>
    </release>
    <release version="0.1.1" date="2025-01-13">
      <description>
        <p>Updated screenshots and improved presentation</p>
        <ul>
          <li>Added modern screenshots showcasing GTK4 interface</li>
          <li>Updated About dialog and Settings dialog screenshots</li>
          <li>Improved metainfo with better screenshot organization</li>
          <li>Enhanced visual documentation for users</li>
        </ul>
      </description>
    </release>
    <release version="0.1.0" date="2023-12-15">
      <description>
        <p>Major rewrite with modern GTK4 architecture and new features</p>
        <ul>
          <li>Restructured as proper Python package with modular organization</li>
          <li>Added Meson build system with Blueprint UI compilation</li>
          <li>Updated to latest library versions (GTK4, Libadwaita 1, WebKitGTK 6.0)</li>
          <li>Implemented Blueprint UI for declarative interface design</li>
          <li>Added comprehensive settings dialog with theme selection</li>
          <li>Implemented persistent cookie and login data management</li>
          <li>Added About dialog with project information and credits</li>
          <li>Integrated GSettings for configuration persistence</li>
          <li>Added WebKit data manager for secure session storage</li>
          <li>Implemented hardware acceleration and media stream support</li>
          <li>Added developer tools support for debugging</li>
          <li>Improved desktop integration with proper icon sets</li>
          <li>Enhanced user agent for optimal WhatsApp Web experience</li>
          <li>Added privacy controls for cookie management</li>
        </ul>
      </description>
    </release>
    <release version="0.0.10" date="2023-10-29">
      <description>
        <ul>
            <li>Corrected mistake on metainfo file.</li>
        </ul>
      </description>
    </release>
    <release version="0.0.9" date="2023-10-29">
      <description>
        <ul>
            <li>More changes to release files.</li>
        </ul>
      </description>
    </release>
    <release version="0.0.7" date="2023-10-29">
      <description>
        <ul>
            <li>Changes to references to compile flatpak.</li>
        </ul>
      </description>
    </release>
    <release version="0.0.6" date="2023-10-29">
      <description>
        <ul>
            <li>Introduced the core application framework using GTK4.</li>
            <li>Integrated WebKit WebView for seamless web content rendering.</li>
            <li>Connectivity to web.whatsapp.com enabled for messaging on desktop.</li>
            <li>Responsive design to ensure usability across different window sizes.</li>
            <li>Added error handling for WebView to improve user experience during connection issues.</li>
            <li>Implemented security features for safer web browsing within the app.</li>
        </ul>
      </description>
    </release>
  </releases>
</component>